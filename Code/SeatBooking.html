<!--Creates the Seat Booking page-->
<!DOCTYPE html>
<html>

    <head>
        <meta name ="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="css/navBar.css"/>
        <link rel="stylesheet" href="css/SeatStyle.css"/>
        <title>StarLux Cinemas Seat Booking</title>
    </head>

    <body onload="getMaxDate()"> 

        <img src="images/MainLogo.png" id="main-seat"><br><br>
        <div class="topnav">
            <a href="main-page.html" id="home-nav">Home</a>
            <a href="Theatres Page.html" id="theatres-nav">Theatres</a>
            <a href="Movie_Experiences.html" id="movie-experiences-nav">Movie Experiences</a>
            <a href="foods_and_drinks.html" id="food-and-drinks-nav">Food and Drinks</a>
            <a href="LSFormT.php"><button id="btn-nav">Book Tickets</button></a>
        </div>

        <div class="screen">
            <div class="container">
            
            <div class="row">
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
            </div>  
            
            <div class="row">
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat occupied"></div>
                <div class="seat occupied"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
            </div>  

            <div class="row">
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat occupied"></div>
                <div class="seat occupied"></div>
            </div>  

            <div class="row">
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
            </div>  

            <div class="row">
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat occupied"></div>
                <div class="seat occupied"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
            </div>  

            <div class="row">
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat"></div>
                <div class="seat occupied"></div>
                <div class="seat occupied"></div>
                <div class="seat occupied"></div>
                <div class="seat"></div>
            </div>  
            
        </div>

        <h1 id="title">Select Your Seats</h1>

        <h2 id="legend1">Available =</h2>
        <h2 id="legend2">Occupied =</h2>
        <h2 id="legend3">Selected =</h2>
        <h2 id="open"></h2>
        <h2 id="chosen"></h2>
        <h2 id="choice"></h2><br><br><br><br>
        
        <form action="TicketForm.php" method="POST">

            <select id="theatres" name="theatres" onchange="change_titles()"required>
                <option value = "">Select Theatre Location</option>
                <option value = "Brampton">Brampton</option>
                <option value = "North York">North York</option>
                <option value = "Mississauga">Mississauga</option>
                <option value = "Markham">Markham</option>
            </select>
            
            <select name="movies" id="movies" size="4" required>
                <optgroup label="Select a Movie" class="size">
                    <option value="Enola Holmes">Enola Holmes</option>
                    <option value="Bird Box">Bird Box</option>
                    <option value="Avengers: Endgame">Avengers: Endgame</option>
                    <option value="Joker">Joker</option>
                    <option value="Jumanji: The Next Level">Jumanji: The Next Level</option>
                    <option value="Grown Ups">Grown Ups</option>
                    <option value="The Hunger Games">The Hunger Games</option>
                    <option value="Mulan">Mulan</option>
                    <option value="Despicable Me">Despicable Me</option>
                    <option value="Jurassic World">Jurassic World</option>
                    <option value="Knives Out">Knives Out</option>
                    <option value="Interstellar">Interstellar</option>
                    <option value="47 Meters Down: Uncaged">47 Meters Down: Uncaged</option>
                    <option value="The Lion King">The Lion King</option>
                    <option value="Deadpool">Deadpool</option>
                </optgroup>
            </select>

            <div id="date-spacing">
                <input type="date" id="date" name="date" required>
            </div>
                
            <input type="submit" id="continue" value="Continue" onclick="check_seats()">

        </form>

        <script src="js/Seats.js" type="text/javascript"></script>
        <script src="js/changeTitles.js" type="text/javascript"></script>
        
        <script>
            //alerts the user if at least one seat hasn't been selected

            function check_seats(){
                var b = JSON.parse(localStorage.getItem('selectedSeats'));
                var theatre_input = document.getElementById("theatres");
                var movie_input = document.getElementById("movies");
                var date_input = document.getElementById("date");

                if ((b.length == 0 && theatre_input.value === "" && movie_input.value === "" && date_input.value === "")){
                    alert("You must choose at least one seat");
                }
                else if ((b.length == 0 && theatre_input.value !== "" && movie_input.value !== "" && date_input.value !== "")){
                    alert("You must choose at least one seat");
                    event.preventDefault();
                }
            }
        </script>
    </body>
</html>